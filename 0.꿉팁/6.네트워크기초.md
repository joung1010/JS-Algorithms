## 네트워크 기초
  
#### 브라우저에 URL을 입력하면 무슨 일이 발생할까요??  
  
## Step1. URL을 해석합니다.  
* scheme:// <user>:<password>@<host>:<port>/<url-path>
* 스키마://계정정보@호스트:포트/path정보
* 스키마: 프로토콜이 들어가는 곳
* 계정정보: ftp같은 경우 계정정보를 통해 접속 허가를 받을 수 있다.
* 예시  
```
    http://example.com:8761/members
    ftp://admin:1q2w3e4r@example.com/image.png
    mailto:kciter@naver.com
    http:programmers.co.kr
```  
  
## Step2. DNS를 조회합니다.  
* Domain Name System
* DNS는 도메인과 IP 주소를 서로 변환해준다.
* DNS로 요청을 보내기 전에 브라우저 캐시와 hosts 파일을 참조한다.  
    브라우저는 DNS로 요청을 보내기전에 브라우저 캐시를 확인하여 이미 해당 도메인을 알고 있는지 확인하고  
    없다면 로컬 컴퓨터의 host파일을 참조한다. 이때 만약 정의가 되어있다면 내부적으로 IP주소를 반환한다.  
    이때 둘다 해당이 되지 않는다면 DNS를 호출한다.  

* DNS는 보통 통신사(ISP)에서 제공하는 것을 사용한다.
* DNS를 운영하는 서버를 보통 Name Server라고 부른다.
* present.do,www.present.do, gateway.dev.present.do 전부 도메인은 present.do  

![img](../img/0.net.png)  
  
## Step3. 해당 IP가 존재하는 서버로 이동합니다.  
* 네트우커ㅡ 장비 라우터를 통해 이동한다.
* 동적 라우팅을 통해 이동한다.  
  

  ![img](../img/1.net.png)  
  
  
## Step4. ARP를 이용하여 MAC 주소 변환을 합니다.  
* Address Resolution Protocol
* 논리 주소인 IP주소를 물리 주소인 MAC 주소로 변환하는 프로토콜
* 실제 통신을 위해 변하지 않는 고유한 MAC 주소가 필요하다.
* 네트워크 내에 ARP를 Broadcasting 하면 해당 IP 주소를 가지고 있는 기기가 MAC 주소를 반환한다.  

![img](../img/2.net.png)  
  
## Step4.1. IP 주소와 MAC 주소
* IP는 논리적인 주소
* MAC은 물리적인 주소
* 기계의 실제 위치를 알기 위해서 MAC 주소가 필요하다.
* 왜 논리적 주소와 물리적 주소로 나눈걸까??  
  
## Step4.2. 경북궁의 주소는??  
* 서울 중로구 사직로 161   -> IP 주소와 유사
* 서울 종로구 세종로 1-191 -> IP 주소와 유사
* 위의 주소만 보고 어디있는지 알 수 있을까? 만약 주소 체계가 바뀌면 찾아갈 수 있을까??(실제 위치는 알 수 없다)  
* 실제 위치는 GPS 좌표가 필요하다 ->북위 37도 34'43" 동경 126도56'38"(37.578611,126.977222)  -> MAC 주소와 유사  
  
## Step4.3. 경북궁으로 택배를 보낸다면???  
![img](../img/3.net.png)  
우리가 배달을 한다고 생각하면  
먼저 `논리적 주소를 보고` 범위를 좁혀 나갈 것 이다.  
경북궁 같은 경우 먼저 서울로 접근하고 다음 종로구 마지막으로 세종로를 탐색한다.  
따라서 탐색순서가 먼저 서울의 진짜 위치를 찾게되고 다음으로 종로구의 진짜 위치를 찾게되고  
마지막으로 세종로의 진짜 위치를 찾게 될것이다.  
`이처럼 IP는 대역을 통해 범위를 좁혀나가는 용도로 사용이 된다.`  

![img](../img/4.net.png)  
  
따라서 만약 경붑궁으로 택배를 보낸다면  
`중간 거점`을 거칠 수 있습니다.  
이때 옥천Hub나 군포Hub를 `라우터`라고 비유한다면  
비슷하게 옥천Hub의 진짜 위치를 알아내고 이동한 다음에  
다시 군포Hub의 진짜 위치를 알아내고 이동합니다.  
그리고 마지막으로 도착지에 배달하게 된다.  
  
## Step5. TCP 통신을 통해 Socket을 열어야 합니다.  
* 네트워크를 통해 해당 기기로 팻킷을 전달한다.
* 3 way handshake로 연결을 요청한다.  -> 마치 택배를 전달할때 초인종을 눌러 허락을 받는 것과 유사
* 요청이 수락되면 기기는 패킷을 받아 처리한다.  

![img](../img/0.tcp.png)  
  
## Step6. 서버는 응답을 반환합니다.
* HTTP 프로토콜로 들어온 패킷을 읽고 처리한다.
* 요청에 따른 적절한 응답 값을 반환한다.  

![img](../img/1.tcp.png)  
  
## Step7. 브라우저는 렌더링합니다.
* HTML을 읽어 DOM Tree를 구축한다.
* 만들어진 DOM Tree를 이용하여 화면에 그린다.
* 스크립트를 실행한다.


